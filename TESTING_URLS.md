# ЁЯзк URLs р╕кр╕│р╕лр╕гр╕▒р╕Ър╕Чр╕Фр╕кр╕нр╕Ъ LINE Login р╕Фр╣Йр╕зр╕в User р╕Ир╕гр╕┤р╕З

## ЁЯУ▒ URLs р╕кр╕│р╕лр╕гр╕▒р╕Ър╕Чр╕Фр╕кр╕нр╕Ър╣Гр╕Щ LINE Application

### 1. р╕лр╕Щр╣Йр╕▓р╕Чр╕Фр╕кр╕нр╕Ъ LINE Login Real User (р╣Гр╕лр╕бр╣И)
```
https://your-domain.com/debug-line-real-user
```
**р╕Яр╕╡р╣Ар╕Ир╕нр╕гр╣М:**
- р╕Чр╕Фр╕кр╕нр╕Ъ LIFF SDK initialization р╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤
- р╕Фр╕╢р╕З access token р╕Ир╕▓р╕Б LINE App р╕Ир╕гр╕┤р╕З
- р╕Чр╕Фр╕кр╕нр╕Ъ backend authentication
- р╣Бр╕кр╕Фр╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕е user profile р╕Ир╕▓р╕Б LINE
- р╕Чр╕Фр╕кр╕нр╕Ъ session check
- р╣Бр╕кр╕Фр╕Зр╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣Мр╣Бр╕Ър╕Ъ real-time

### 2. р╕лр╕Щр╣Йр╕▓ LIFF р╕лр╕ер╕▒р╕Б
```
https://your-domain.com/liff
```
**р╣Гр╕Кр╣Йр╕кр╕│р╕лр╕гр╕▒р╕Ъ:**
- р╕Бр╕▓р╕гр╣Ар╕Вр╣Йр╕▓р╕кр╕╣р╣Ир╕гр╕░р╕Ър╕Ър╕Ыр╕Бр╕Хр╕┤р╕Ир╕▓р╕Б LINE App
- р╕Чр╕Фр╕кр╕нр╕Ъ auto-login flow
- р╕Чр╕Фр╕кр╕нр╕Ъ redirect р╣Др╕Ыр╕вр╕▒р╕Зр╣Ар╕бр╕Щр╕╣р╕гр╣Йр╕▓р╕Щр╕нр╕▓р╕лр╕▓р╕г

### 3. р╕лр╕Щр╣Йр╕▓р╕Чр╕Фр╕кр╕нр╕Ъ Manual (р╕кр╕│р╕лр╕гр╕▒р╕Ъ Developers)
```
https://your-domain.com/debug-line-login-test
```
**р╣Гр╕Кр╣Йр╕кр╕│р╕лр╕гр╕▒р╕Ъ:**
- р╣Гр╕кр╣И access token manual
- р╕Чр╕Фр╕кр╕нр╕Ъ API endpoint р╣Вр╕Фр╕вр╕Хр╕гр╕З
- р╕Чр╕Фр╕кр╕нр╕Ъ error cases

## ЁЯФз р╕зр╕┤р╕Шр╕╡р╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ъ

### р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Чр╕╡р╣И 1: р╣Ар╕Хр╕гр╕╡р╕вр╕бр╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ъ
1. р╣Ар╕Ыр╕┤р╕Ф LINE App р╕Ър╕Щр╕бр╕╖р╕нр╕Цр╕╖р╕н
2. р╣Др╕Ыр╕Чр╕╡р╣Ир╕лр╕Щр╣Йр╕▓р╕Бр╕▓р╕гр╕Юр╕╣р╕Фр╕Др╕╕р╕вр╣Гр╕Фр╕Бр╣Зр╣Др╕Фр╣Й
3. р╕кр╣Ир╕Зр╕ер╕┤р╕Зр╕Бр╣Мр╕Чр╕Фр╕кр╕нр╕Ър╣Гр╕лр╣Йр╕Хр╕▒р╕зр╣Ар╕нр╕З р╕лр╕гр╕╖р╕н
4. р╣Ар╕Ыр╕┤р╕Ф Browser р╣Гр╕Щ LINE App

### р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Чр╕╡р╣И 2: р╕Чр╕Фр╕кр╕нр╕Ър╕Фр╣Йр╕зр╕в Real User
1. р╣Ар╕Вр╣Йр╕▓р╣Др╕Ыр╕Чр╕╡р╣И: `https://your-domain.com/debug-line-real-user`
2. р╕гр╕░р╕Ър╕Ър╕Ир╕░:
   - р╕Хр╕гр╕зр╕Ир╕Ир╕▒р╕Ър╕зр╣Ир╕▓р╕нр╕вр╕╣р╣Ир╣Гр╕Щ LINE App р╕лр╕гр╕╖р╕нр╣Др╕бр╣И
   - р╣Вр╕лр╕ер╕Ф LIFF SDK р╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤
   - р╕Фр╕╢р╕З access token р╣Бр╕ер╕░ user profile
3. р╕Бр╕Фр╕Ыр╕╕р╣Ир╕б "ЁЯЪА р╕Чр╕Фр╕кр╕нр╕Ър╣Ар╕Хр╣Зр╕б" р╣Ар╕Юр╕╖р╣Ир╕нр╕Чр╕Фр╕кр╕нр╕Ър╕Бр╕▓р╕гр╕Чр╕│р╕Зр╕▓р╕Щр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф
4. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣Мр╕зр╣Ир╕▓р╕бр╕╡р╕Вр╣Йр╕нр╕Ьр╕┤р╕Фр╕Юр╕ер╕▓р╕Фр╕лр╕гр╕╖р╕нр╣Др╕бр╣И

### р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Чр╕╡р╣И 3: р╕Чр╕Фр╕кр╕нр╕Ъ LIFF р╕Ыр╕Бр╕Хр╕┤
1. р╣Ар╕Вр╣Йр╕▓р╣Др╕Ыр╕Чр╕╡р╣И: `https://your-domain.com/liff`
2. р╕гр╕░р╕Ър╕Ър╕Ир╕░р╕Чр╕│ auto-login
3. р╕Др╕зр╕гр╕Ир╕░ redirect р╣Др╕Ыр╕вр╕▒р╕Зр╣Ар╕бр╕Щр╕╣р╕гр╣Йр╕▓р╕Щр╕нр╕▓р╕лр╕▓р╕гр╣Вр╕Фр╕вр╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤

## ЁЯРЫ р╕Бр╕▓р╕г Debug р╕Ыр╕▒р╕Нр╕лр╕▓

### р╕Ыр╕▒р╕Нр╕лр╕▓р╕Чр╕╡р╣Ир╕Юр╕Ър╕Ър╣Ир╕нр╕в:

#### 1. LIFF SDK р╣Др╕бр╣Ир╣Вр╕лр╕ер╕Ф
**р╕нр╕▓р╕Бр╕▓р╕г:** тЭМ р╣Др╕бр╣Ир╕кр╕▓р╕бр╕▓р╕гр╕Цр╣Вр╕лр╕ер╕Ф LIFF SDK р╣Др╕Фр╣Й  
**р╣Бр╕Бр╣Йр╣Др╕В:** р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Бр╕▓р╕гр╣Ар╕Кр╕╖р╣Ир╕нр╕бр╕Хр╣Ир╕нр╕нр╕┤р╕Щр╣Ар╕Чр╕нр╕гр╣Мр╣Ар╕Щр╣Зр╕Х р╕лр╕гр╕╖р╕нр╕ер╕нр╕Зр╣Ар╕Ыр╕┤р╕Фр╕лр╕Щр╣Йр╕▓р╣Гр╕лр╕бр╣И

#### 2. Access Token р╣Др╕бр╣Ир╣Др╕Фр╣Й
**р╕нр╕▓р╕Бр╕▓р╕г:** тЪая╕П р╕вр╕▒р╕Зр╣Др╕бр╣Ир╣Др╕Фр╣Йр╕ер╣Зр╕нр╕Бр╕нр╕┤р╕Щ LINE  
**р╣Бр╕Бр╣Йр╣Др╕В:** р╕Бр╕Фр╕Ыр╕╕р╣Ир╕б "ЁЯФР р╣Ар╕Вр╣Йр╕▓р╕кр╕╣р╣Ир╕гр╕░р╕Ър╕Ъ LINE" р╣Бр╕ер╣Йр╕зр╕нр╕Щр╕╕р╕Нр╕▓р╕Х permissions

#### 3. Backend Authentication р╕ер╣Йр╕бр╣Ар╕лр╕ер╕з
**р╕нр╕▓р╕Бр╕▓р╕г:** тЭМ Backend Authentication р╕ер╣Йр╕бр╣Ар╕лр╕ер╕з (401/400)  
**р╣Бр╕Бр╣Йр╣Др╕В:** 
- р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓ user р╕бр╕╡р╣Гр╕Щр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕лр╕гр╕╖р╕нр╣Др╕бр╣И
- р╕гр╕▒р╕Щ `node scripts/fix-missing-users.js check`
- р╕лр╕▓р╕Б user р╕лр╕▓р╕вр╣Др╕Ы р╕гр╕▒р╕Щ `node scripts/fix-missing-users.js recreate <LINE_USER_ID>`

#### 4. Session р╕лр╕бр╕Фр╕нр╕▓р╕вр╕╕
**р╕нр╕▓р╕Бр╕▓р╕г:** тЪая╕П Session р╣Др╕бр╣Ир╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕З (401)  
**р╣Бр╕Бр╣Йр╣Др╕В:** р╕гр╕░р╕Ър╕Ър╕Ир╕░р╕ер╕Ъ cookies р╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤р╣Бр╕ер╕░р╕кр╕гр╣Йр╕▓р╕З session р╣Гр╕лр╕бр╣И

## ЁЯУК р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕╡р╣Ир╕Др╕зр╕гр╣Ар╕Бр╣Зр╕Ър╣Ар╕бр╕╖р╣Ир╕нр╕Чр╕Фр╕кр╕нр╕Ъ

### р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Юр╕╖р╣Йр╕Щр╕Рр╕▓р╕Щ:
- LINE User ID
- Display Name
- Platform (iOS/Android/Browser)
- Access Token (20 р╕Хр╕▒р╕зр╕нр╕▒р╕Бр╕йр╕гр╣Бр╕гр╕Б)

### р╕Вр╣Йр╕нр╕бр╕╣р╕е Debug:
- LIFF Context
- User Agent String
- р╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣М Backend Authentication
- Error Messages (р╕Цр╣Йр╕▓р╕бр╕╡)

## ЁЯЪА URLs р╕нр╕╖р╣Ир╕Щ р╣Ж р╕Чр╕╡р╣Ир╣Ар╕Ыр╣Зр╕Щр╕Ыр╕гр╕░р╣Вр╕вр╕Кр╕Щр╣М

### Health Check
```
https://your-domain.com/api/health
```

### Environment Debug
```
https://your-domain.com/api/debug/env
```

### Production Status
```
https://your-domain.com/api/debug/production-status
```

### Session Check
```
https://your-domain.com/api/auth/line-session
```

## ЁЯУЭ р╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ъ

**р╕зр╕▒р╕Щр╕Чр╕╡р╣И:** _______________  
**р╕Ьр╕╣р╣Йр╕Чр╕Фр╕кр╕нр╕Ъ:** _______________  
**LINE User ID:** _______________  
**Platform:** _______________  

**р╕Ьр╕ер╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ъ:**
- [ ] LIFF SDK р╣Вр╕лр╕ер╕Фр╕кр╕│р╣Ар╕гр╣Зр╕И
- [ ] р╣Др╕Фр╣Й Access Token р╕кр╕│р╣Ар╕гр╣Зр╕И
- [ ] р╣Др╕Фр╣Й User Profile р╕кр╕│р╣Ар╕гр╣Зр╕И
- [ ] Backend Authentication р╕кр╕│р╣Ар╕гр╣Зр╕И
- [ ] Session Check р╕кр╕│р╣Ар╕гр╣Зр╕И
- [ ] Redirect р╣Др╕Ыр╣Ар╕бр╕Щр╕╣р╕кр╕│р╣Ар╕гр╣Зр╕И

**р╕Ыр╕▒р╕Нр╕лр╕▓р╕Чр╕╡р╣Ир╕Юр╕Ъ:**
_______________
_______________
_______________

**р╕Бр╕▓р╕гр╣Бр╕Бр╣Йр╣Др╕В:**
_______________
_______________
_______________ 